# 01.15 FE 스터디 주제

- React와 Vue로 TodoList 직접 만들어 비교해보기
- DOM과 Virtual DOM + 타 프레임워크는 어떻게 운영할까?

<hr>

## DOM과 Virtual DOM

DOM(Document Object Model)과 Virtual DOM은 웹 개발에서 사용되는 중요한 개념입니다.

## DOM

DOM은 웹 페이지의 구조를 표현하는 객체 모델로, HTML, XML, 또는 다른 마크업 언어로 작성된 문서의 구조를 표현합니다. DOM은 문서를 트리 구조로 표현하며, 각 요소는 노드로 표현됩니다. 이 노드들은 **스크립트 언어**를 사용하여 동적으로 조작할 수 있습니다.

### 특징

- 실제 DOM 조작: 웹 페이지의 내용이나 구조를 변경할 때, 브라우저는 실제 DOM에 직접 접근하여 조작합니다.

- 비효율적: 대규모 애플리케이션에서 **동적인 UI 업데이트가 빈번하게 발생**하면, DOM 조작이 비효율적일 수 있습니다.

### 단점

DOM 트리는 거대해지면서 속도에 이슈가 발생할 수 있음
또한 잦은 DOM 업데이트는 오류와 UI에 악영향을 미침. 이 말은, 변경점을 적용한 문서를 계속 리렌더링 해줘야 하는데 트리가 거대해지면 그만큼 리소스가 소모

## Virtual DOM

Virtual DOM은 메모리에 존재하는 가상의 DOM 트리를 의미합니다. 실제 DOM과 동일한 구조를 가지지만, 실제 DOM에 직접 접근하지 않고 메모리에서 관리됩니다. 주로 성능 향상을 위해 사용되며, 주로 SPA(Single Page Application)에서 적용되는 개념입니다. 하나의 큰 HTML을 Real DOM으로 칭하고 해당 DOM을 컴포넌트 단위로 쪼개서 추상화한 개념을 뜻합니다.

Virtual DOM은 메모리에만 존재합니다.

Real DOM에서 직접 처리하는 게 아니라 Virtual DOM이 버퍼 역할을 해줌으로써 어떤 부분이 바뀔지 미리 계산과 수정 후에 수정된 해당 부분만 업데이트 해주기 위한 기술입니다.

Real DOM은 요소의 자식 노드가 추가되면 문서 전체가 갱신되지만 Virtual DOM은 버퍼 역할을 해줌으로써 Real DOM을 추상화한 DOM과 비교해 변경점만 Real DOM에 적용해 전체 문서가 갱신되지 않습니다.

Real DOM은 querySelector등의 메소드로 요소를 찾는데, React에서는 ref로 요소를 찾습니다.

### 동작 과정

- 가상 DOM 구성: 상태 변화에 대한 가상 DOM을 생성합니다.
- 차이 비교: 현재 가상 DOM과 이전 가상 DOM을 비교하여 변경된 부분을 찾습니다.
- 패치: 변경된 부분만을 실제 DOM에 적용합니다.

### 장점

- 성능 개선: 가상 DOM은 메모리에서 동작하기 때문에 실제 DOM 조작보다 빠릅니다.
- 재조정 최소화: 변경 사항이 발생하더라도 전체 페이지를 다시 그리는 것이 아니라 변경된 부분만을 업데이트합니다.

## DOM과 Virtual DOM 비교

|                   | DOM                                                      | Virtual DOM                                           |
| ----------------- | -------------------------------------------------------- | ----------------------------------------------------- |
| **성능**          | 직접 조작하므로 대규모 애플리케이션에서는 성능 저하 가능 | 효율적인 업데이트로 성능 향상                         |
| **업데이트 방식** | 실제 DOM에 직접 조작                                     | 메모리에서 가상 DOM을 조작하고 변경 부분만을 업데이트 |
| **재조정 관리**   | 수동으로 관리해야 함                                     | 라이브러리나 프레임워크에 의해 자동으로 처리          |
| **사용성**        | 브라우저 API를 사용하여 직접 조작                        | 주로 React와 같은 라이브러리/프레임워크에서 활용      |

## DOM과 Virtual DOM의 장점 비교

| 장점                   | DOM                                                               | Virtual DOM                                               |
| ---------------------- | ----------------------------------------------------------------- | --------------------------------------------------------- |
| **동적 상호작용**      | 가능 (JavaScript를 통한 동적 변경 가능)                           | 가능 (JavaScript를 통한 동적 변경 가능)                   |
| **이벤트 처리**        | 가능 (이벤트 핸들링을 통한 동작 수행)                             | 가능 (이벤트 핸들링을 통한 동작 수행)                     |
| **플랫폼 독립성**      | 독립성 (웹 표준에 기반하여 여러 브라우저에서 동일 코드 사용 가능) | 독립성 (웹 표준을 기반으로 하여 크로스 브라우징 용이)     |
| **접근성 향상**        | 가능 (구조적 표현으로 접근성 향상)                                | 가능 (구조적 표현으로 접근성 향상)                        |
| **동적 UI 업데이트**   | 가능 (동적으로 UI를 변경할 수 있음)                               | 가능 (가상 DOM을 통한 효율적인 업데이트)                  |
| **다양한 데이터 표현** | 가능 (XML, HTML 등 다양한 문서 형식을 표현)                       | 가능 (XML, HTML 등 다양한 문서 형식을 표현)               |
| **컴포넌트 기반 개발** | 가능 (독립적인 컴포넌트로 개발 가능)                              | 가능 (가상 DOM을 활용한 컴포넌트 기반 개발 지원)          |
| **성능 향상**          | 가능 (성능 저하 가능, 특히 대규모 애플리케이션에서)               | 가능 (가상 DOM을 활용한 효율적인 업데이트로 성능 향상)    |
| **일관된 성능**        | 브라우저에 따라 성능 상이할 수 있음                               | 일관된 성능 (크로스 브라우징에서도 일관성 있는 성능)      |
| **재조정 최소화**      | 수동으로 관리해야 함                                              | 자동으로 처리되어 변경 부분만 업데이트                    |
| **반응형 UI**          | 가능 (수동으로 관리해야 함)                                       | 가능 (가상 DOM을 통한 자동 업데이트)                      |
| **유지보수 용이성**    | 일부적 (컴포넌트 기반의 개발은 가능)                              | 높음 (가상 DOM을 활용한 컴포넌트 기반 아키텍처 쉽게 구현) |

---

## DOM에 대하여

- DOM의 계층 구조

<img src="./images/dom_tree.png">

<출처: https://blog.10pines.com/2018/08/27/reactjs-virtual-dom/>

<br />

웹 개발은 브라우저에 DOM 트리를 그리면서 시작됩니다. 프로그래머는 DOM의 노드를 탐색하고, 새로 삽입하거나 삭제하면서 웹페이지를 그려 나가고, 브라우저는 자바스크립트나 파이썬 같은 프로그래밍 언어가 DOM의 노드에 접근할 수 있도록 DOM API를 제공합니다.

<br />

- DOM의 조작 메소드

document.getElementById, document.querySelector, element.appendChild 등 DOM을 동적으로 조작하기 위한 메소드들을 제공합니다. DOM을 조작하는 메소드들을 학습하고 활용할 수 있어야 합니다.

<br />

- 이벤트 처리

이벤트 처리에 대한 이해와 관련 메서드 (addEventListener 등)를 습득하여 사용자와의 상호작용을 구현할 수 있어야 합니다.

<br />

- DOM 탐색과 조작

DOM을 효율적으로 탐색하고 조작하는 방법을 학습합니다. parentNode, childNodes, innerHTML 등의 속성 및 메서드를 활용할 수 있어야 합니다.

---

## Virtual DOM에 대하여

- 가상 돔의 작동 원리

<img src="./images/virtual_dom.png">

UI가 변경을 감지하면 UI를 Virtual DOM으로 렌더링합니다. (실제 화면상 렌더링 되는 것이 아닌 비교를 위한 가상 렌더링)
현재 Virtual DOM과 이전 Virtual DOM을 비교해 차이를 계산합니다.
변경된 부분을 실제 DOM에 반영합니다.

### 리액트의 얕은 비교

React는 노드를 비교할 때 얕은 비교를 합니다. 이 말이 무엇인가 하면, 먼저 JavaScript의 원시 자료형과 참조 자료형에 대한 이해가 바탕이 되어야 합니다.

React의 얕은 비교는 같은 레벨에서만 일어납니다. 숫자, 문자열, 불리언과 같은 원시 자료형은 값을 비교하지만 배열, 객체와 같은 참조 자료형은 그 안의 값을 비교하지 않고, 그들의 레퍼런스(참조되는 위치)를 비교합니다.

그러므로 배열을 직접 수정하는 방식인 push, pop과 같은 메소드로 배열을 수정한 뒤 setState에 담아주어도 기본적으로 같은 참조 위치를 가지고 있기 때문에 값의 변화를 감지하지 못합니다.

React에서 배열의 값을 변경할 때 객체와 마찬가지로 불변성을 지켜주어야 합니다. 이 말은, 객체 혹은 배열의 원본을 수정하지 않고 상태 변경을 원하는 배열과 함수를 복사(깊은 복사(O), 얕은 복사(X))하고나서 사용해야 한다는 말입니다.

### 최적화

가상 DOM에서 최적화는 성능 향상을 위해 중요한 부분입니다. 다양한 기술과 전략을 사용하여 불필요한 업데이트를 방지하고, 변경된 부분만을 효율적으로 감지하고 처리하는 것이 핵심입니다. 아래는 가상 DOM에서최적화를 위한 몇 가지 고려 사항들이 있습니다.

- Key 사용<br />
  React와 같은 라이브러리에서는 컴포넌트의 리스트를 렌더링할 때 각 항목에 고유한 key 속성을 제공할 수 있습니다. 이는 가상 DOM이 업데이트 시 어떤 항목이 변경되었는지를 식별하는 데 도움을 줍니다. (그냥 넣는 게 아니라구요)

- 순수 컴포넌트와 shouldComponentUpdate 메소드<br />
  순수 함수로 구현된 컴포넌트와 shouldComponentUpdate 메서드를 사용하여 컴포넌트가 업데이트되어야 하는지 여부를 결정할 수 있습니다. 변경 사항이 없다면 리렌더링을 건너뛰고 성능을 향상시킵니다.

- 가상 DOM의 Diffing 알고리즘 최적화<br />
  가상 DOM의 Diffing 알고리즘을 최적화하여 변경된 부분을 효율적으로 감지하는 것이 중요합니다. React는 이를 위해 휴리스틱 알고리즘을 사용하여 트리를 비교하고 업데이트를 최적화합니다.

- 메모이제이션(Memoization)<br />
  Memoization은 이전에 계산된 값을 캐시하여 중복 계산을 방지하는 기술입니다. React에서는 React.memo나 useMemo를 사용하여 컴포넌트나 값의 메모이제이션을 적용할 수 있습니다.

- 가상 DOM의 Batch 처리<br />
  일부 라이브러리와 프레임워크는 가상 DOM의 변경을 일괄로 처리하여 여러 업데이트를 효율적으로 수행할 수 있도록 지원합니다. 이는 렌더링 성능을 향상시키는 데 도움이 됩니다.

---

# 킈즈타임

## 🫵 DOM의 계층 구조를 나타내기 위해 사용되는 객체 모델은 무엇일까요?

🧏‍♂️ DHTML<br />

👩‍👧 XML<br />

👨‍👩‍👧 HTML<br />

👨‍👩‍👧‍👦 JSON<br />

<br />

## 🫵 가상 DOM의 장점 중 하나로 성능 향상을 위해 사용되는 비교 알고리즘은 무엇일까요?

🧏‍♂️ Dipping Sauce<br/>

👩‍👧 A\* Algorithm<br/>

👨‍👩‍👧 Bellman-Ford Algorithm<br/>

👨‍👩‍👧‍👦 Diffing Algorithm<br/>
